<html>
    <head>
        <script>
/*
Copyright 2019 Sérgio Freitas da Silva Júnior

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
            let [dist_mult,min_dist,spd]=[600,600,30];
            let conn=[
                [[1,100],[2,100]],
                [[0,100],[2,100]],
                [[0,100],[1,100]]
            ];
            conn=[[[1,1],[6,1]],[[0,1],[2,1]],[[1,1],[3,1]],[[2,1],[4,1]],[[3,1],[5,1],[7,1]],[[4,1],[8,1]],[[0,1],[7,1],[8,1]],[[4,1],[6,1],[8,1]],[[5,1],[6,1],[7,1]]];
            //conn=[[[1,1],[29,1]],[[0,1],[2,1],[41,1]],[[1,1],[3,1],[81,1],[62,1],[87,1]],[[2,1],[4,1],[19,1],[9,1],[74,1]],[[3,1],[5,1],[83,1]],[[4,1],[6,1],[29,1],[75,1],[91,1]],[[5,1],[7,1],[45,1],[28,1]],[[6,1],[8,1],[20,1]],[[7,1],[9,1],[20,1]],[[8,1],[10,1],[3,1],[48,1],[92,1]],[[9,1],[11,1],[91,1],[52,1]],[[10,1],[12,1],[24,1],[23,1]],[[11,1],[13,1],[30,1],[35,1]],[[12,1],[14,1],[88,1],[37,1]],[[13,1],[15,1],[25,1]],[[14,1],[16,1],[49,1],[57,1],[93,1]],[[15,1],[17,1],[28,1],[83,1]],[[16,1],[18,1],[65,1]],[[17,1],[19,1],[35,1]],[[18,1],[20,1],[3,1],[22,1],[29,1],[46,1]],[[19,1],[21,1],[7,1],[8,1],[85,1]],[[20,1],[22,1],[43,1],[56,1]],[[21,1],[23,1],[19,1],[49,1]],[[22,1],[24,1],[11,1],[26,1],[45,1],[60,1],[71,1]],[[23,1],[25,1],[11,1],[92,1],[41,1],[55,1]],[[24,1],[26,1],[14,1],[70,1],[43,1]],[[25,1],[27,1],[23,1],[61,1]],[[26,1],[28,1],[56,1],[64,1]],[[27,1],[29,1],[16,1],[6,1]],[[28,1],[30,1],[0,1],[5,1],[19,1]],[[29,1],[31,1],[12,1],[69,1],[85,1]],[[30,1],[32,1],[57,1]],[[31,1],[33,1],[89,1],[39,1]],[[32,1],[34,1],[95,1]],[[33,1],[35,1],[37,1],[58,1],[72,1]],[[34,1],[36,1],[18,1],[12,1]],[[35,1],[37,1],[74,1]],[[36,1],[38,1],[34,1],[13,1]],[[37,1],[39,1],[94,1]],[[38,1],[40,1],[32,1],[73,1]],[[39,1],[41,1],[46,1],[49,1]],[[40,1],[42,1],[1,1],[24,1],[82,1]],[[41,1],[43,1],[77,1]],[[42,1],[44,1],[21,1],[25,1]],[[43,1],[45,1],[78,1],[88,1]],[[44,1],[46,1],[6,1],[23,1]],[[45,1],[47,1],[40,1],[19,1]],[[46,1],[48,1],[65,1],[69,1],[84,1],[98,1]],[[47,1],[49,1],[9,1]],[[48,1],[50,1],[15,1],[22,1],[40,1]],[[49,1],[51,1],[74,1],[63,1]],[[50,1],[52,1],[71,1],[94,1]],[[51,1],[53,1],[10,1]],[[52,1],[54,1],[58,1]],[[53,1],[55,1],[96,1]],[[54,1],[56,1],[24,1],[59,1]],[[55,1],[57,1],[27,1],[21,1]],[[56,1],[58,1],[31,1],[15,1]],[[57,1],[59,1],[53,1],[34,1],[77,1]],[[58,1],[60,1],[55,1],[76,1]],[[59,1],[61,1],[23,1]],[[60,1],[62,1],[26,1]],[[61,1],[63,1],[2,1],[97,1]],[[62,1],[64,1],[50,1]],[[63,1],[65,1],[27,1]],[[64,1],[66,1],[17,1],[47,1],[95,1]],[[65,1],[67,1],[71,1]],[[66,1],[68,1],[81,1]],[[67,1],[69,1],[82,1]],[[68,1],[70,1],[30,1],[47,1]],[[69,1],[71,1],[25,1],[94,1]],[[70,1],[72,1],[51,1],[66,1],[23,1]],[[71,1],[73,1],[34,1],[95,1]],[[72,1],[74,1],[39,1],[81,1]],[[73,1],[75,1],[36,1],[50,1],[3,1]],[[74,1],[76,1],[5,1]],[[75,1],[77,1],[59,1]],[[76,1],[78,1],[42,1],[58,1]],[[77,1],[79,1],[44,1],[88,1]],[[78,1],[80,1],[97,1]],[[79,1],[81,1],[97,1]],[[80,1],[82,1],[2,1],[67,1],[73,1],[96,1]],[[81,1],[83,1],[68,1],[41,1]],[[82,1],[84,1],[4,1],[16,1]],[[83,1],[85,1],[47,1]],[[84,1],[86,1],[20,1],[30,1]],[[85,1],[87,1],[88,1],[99,1]],[[86,1],[88,1],[2,1]],[[87,1],[89,1],[13,1],[78,1],[86,1],[44,1]],[[88,1],[90,1],[32,1],[99,1]],[[89,1],[91,1],[96,1]],[[90,1],[92,1],[10,1],[5,1]],[[91,1],[93,1],[24,1],[9,1]],[[92,1],[94,1],[15,1]],[[93,1],[95,1],[38,1],[70,1],[51,1]],[[94,1],[96,1],[33,1],[65,1],[72,1]],[[95,1],[97,1],[54,1],[90,1],[81,1]],[[96,1],[98,1],[79,1],[80,1],[62,1]],[[97,1],[99,1],[47,1]],[[98,1],[89,1],[86,1]]];
            //conn=[[[1,1],[5,1]],[[0,1],[2,1],[8,1],[12,1]],[[1,1],[3,1],[9,1]],[[2,1],[4,1],[10,1],[11,1]],[[3,1],[5,1],[11,1]],[[4,1],[6,1],[0,1],[11,1],[10,1]],[[5,1],[7,1],[10,1]],[[6,1],[8,1],[19,1]],[[7,1],[9,1],[1,1],[16,1],[13,1],[17,1]],[[8,1],[10,1],[2,1],[12,1],[18,1]],[[9,1],[11,1],[3,1],[6,1],[5,1]],[[10,1],[12,1],[4,1],[5,1],[3,1],[15,1],[19,1]],[[11,1],[13,1],[9,1],[1,1]],[[12,1],[14,1],[8,1]],[[13,1],[15,1],[16,1]],[[14,1],[16,1],[11,1]],[[15,1],[17,1],[8,1],[14,1],[19,1]],[[16,1],[18,1],[8,1]],[[17,1],[19,1],[9,1]],[[18,1],[7,1],[16,1],[11,1]]];
            let connn=[];
            let nodes=[];
            function node(){
                this.x=Math.random()*innerWidth;
                this.y=Math.random()*innerHeight;
                this.n="";
            }
            function load(){
                window.c=document.getElementById("c");
                window.ctx=c.getContext("2d");
                c.width=innerWidth
                c.height=innerHeight
                setTimeout(frame,100);
                let i=0;
                conn=conn.map((n,i)=>{
                    nodes.push(new node());
                    for(c of n)c[1]*=dist_mult
                    if(typeof n[0] == "string")
                    {
                        connn.push(n[0]);
                        return n.slice(1);
                    }
                    connn.push(i);
                    return n;
                })
            }
            function frame(){
            	ctx.fillStyle="#ffffff";
                ctx.fillRect(0,0,innerWidth,innerHeight)
                debugger;
                ctx.strokeStyle="#000000";
                ctx.fillStyle="#000000";
                for(i in nodes){
                    let n=nodes[i];
                    ctx.beginPath();
                    ctx.fillText(connn[i],n.x,n.y);
                    ctx.arc(n.x,n.y,20,0,Math.PI*2);
                    ctx.stroke();
                    ctx.closePath();
                    n.vx=0;n.vy=0;

                    let [ang,dist]=[Math.atan2(n.x-(innerWidth/2),n.y-(innerHeight/2)),Math.sqrt((n.x-(innerWidth/2))**2+(n.y-(innerHeight/2))**2)];
                    n.vx+=Math.sin(ang)*((dist-spd)/spd);
                    n.vy+=Math.cos(ang)*((dist-spd)/spd);

                    for(j in nodes){
                        let [ang,dist]=[Math.atan2(n.x-nodes[j].x,n.y-nodes[j].y),Math.sqrt((n.x-nodes[j].x)**2+(n.y-nodes[j].y)**2)];
                        n.vx+=Math.sin(ang)*((dist-min_dist)/min_dist);
                        n.vy+=Math.cos(ang)*((dist-min_dist)/min_dist);
                    }
                    for(con of conn[i]){
                        let [ang,dist]=[Math.atan2(n.x-nodes[con[0]].x,n.y-nodes[con[0]].y),Math.sqrt((n.x-nodes[con[0]].x)**2+(n.y-nodes[con[0]].y)**2)];
                        let fac=con[1]/conn.length
                        n.vx+=Math.sin(ang)*((dist-fac)/fac);
                        n.vy+=Math.cos(ang)*((dist-fac)/fac);
                        
                        ctx.save();
                        ctx.moveTo(n.x,n.y);
                        ctx.lineTo(nodes[con[0]].x,nodes[con[0]].y)
                        ctx.stroke();
                        ctx.restore();

                    }
                    n.x-=n.vx;
                    n.y-=n.vy;
                }
                setTimeout(frame,3);
            }
        </script>
    </head>
    <body>
        <canvas id="c"></canvas>
        <script>
        load()
        </script>
    </body>
</html>
